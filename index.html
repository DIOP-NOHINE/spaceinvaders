<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
    <title>spaceinvaders</title>
</head>
<body>
     <script type="text/javascript">
        var alien1 =new Sprite("img/alien1.png", 100,50);
        var alien2 =new Sprite("img/alien2.png", 400,50);
        var alien3 =new Sprite("img/alien3.png", 700,50);
        var alien4 =new Sprite("img/alien4.png", 1000,50);
        var alien5 =new Sprite("img/alien5.png", 1300,50);

        var alien6 =new Sprite("img/alien1.png", 250,150);
        var alien7 =new Sprite("img/alien2.png", 550,150);
        var alien8 =new Sprite("img/alien3.png", 850,150);
        var alien9 =new Sprite("img/alien4.png", 1150,150);
        var alien10 =new Sprite("img/alien5.png", 1450,150);

        var alien11 =new Sprite("img/alien1.png", 100,250);
        var alien12 =new Sprite("img/alien2.png", 400,250);
        var alien13 =new Sprite("img/alien3.png", 700,250);
        var alien14 =new Sprite("img/alien4.png", 1000,250);
        var alien15 =new Sprite("img/alien5.png", 1300,250);

        var missile=new Sprite("img/missile.png",0,0, "missile");
        var vaisseau=new Sprite("img/vaisseau.png",780,700);
        // var giphy=new Sprite("img/giphy.gif",0,0, "explosion")
        // giphy._node.style.display="none"
        missile._node.style.display="none";
        document.onkeydown=function(event){
        // keycode
        if(event.keyCode==65){
            vaisseau.left-=10;
            vaisseau.top-=10;
        }else if(event.keyCode==38){
            vaisseau.top-=10;
        }else if(event.keyCode==76){
            vaisseau.left+=10;
            vaisseau.top-=10;
        }else if (event.keyCode==37) {
            vaisseau.left-=10;
        }else if (event.keyCode== 39) {
            vaisseau.left+=10;
        }else if (event.keyCode== 97) {
            vaisseau.left-=10;
            vaisseau.top+=10;
        }else if (event.keyCode==40) {
            vaisseau.top+=10;
        }else if (event.keyCode==99) {
            vaisseau.left+=10;
            vaisseau.top+=10;
        }

        if (vaisseau.left<0 ) {
            vaisseau.left=0;
        }
        if (vaisseau.left>document.body.clientWidth-vaisseau._node.width) {
            vaisseau.left=document.body.clientWidth-vaisseau._node.width;
        }
        if (vaisseau.top<0) {
            vaisseau.top=0;
        }
        if (vaisseau.top>document.body.clientHeight-vaisseau._node.height) {
            vaisseau.top=document.body.clientHeight-vaisseau._node.height;
        }
        if (event.keyCode==66 || event.keyCode==32) {
            if (missile._node.style.display=="none") {
                missile._node.style.display="block";
                missile.left=vaisseau.left+(vaisseau._node.width-missile._node.width)/2;
                missile.top= vaisseau.top;
                missile.startAnimation(moveMissile,20);
                tire.play();
            } 
        }
        };

        function moveMissile(missile){
            missile.top-=10;
            
            if (missile.top<-40) {
                missile.stopAnimation();
                missile._node.style.display="none";
            }

            //gere la collision entre le vaisseau et les lien
            for (var i = 1; i <= 15; i++) {
                 var alien=window["alien"+i];
                 if (alien._node.style.display=="none") {
                    continue;
                 } else{
                    if (missile.checkCollision(alien)) {
                     explosion.play();
                        // giphy._node.style.display="block";
                        // giphy.top=alien.top;
                        // giphy.left=alien.left;  
                        
                     missile.stopAnimation();
                     missile._node.style.display="none";
                     alien.stopAnimation();
                     alien._node.style.display="none"
                 }
                 }
        
            }
        }

        

        // function gameover(giphy){
                       
        //     for (var i = 1; i <= 15; i++) {
        //          var alien=window["alien"+i];
        //          if (alien._node.style.display=="none") {
        //             continue;
        //          } else{
        //             if (missile.checkCollision(alien)) {
        //             giphy.top=alien.top;
        //             giphy.left=alien.left;
        //              giphy.stopAnimation();
        //              giphy._node.style.display="none";
        //          }

        //          }
        
        //     }
        // }

       function moveAlienToLeft(alien){
           alien.left-=3;
         if (alien.left <=0) {
             alien.top+=50;
             alien.startAnimation(moveAlienToRight,20);
         }
       }

       function moveAlienToRight(alien){
           alien.left+=3;
         if (alien.left>document.body.clientWidth-alien._node.width) {
             alien.top+=50;
             alien.startAnimation(moveAlienToLeft,20);
         }
         
       }

       alien1.startAnimation(moveAlienToRight,20);
       alien2.startAnimation(moveAlienToRight,20);
       alien3.startAnimation(moveAlienToRight,20);
       alien4.startAnimation(moveAlienToRight,20);
       alien5.startAnimation(moveAlienToRight,20);

       alien6.startAnimation(moveAlienToRight,20);
       alien7.startAnimation(moveAlienToRight,20);
       alien8.startAnimation(moveAlienToRight,20);
       alien9.startAnimation(moveAlienToRight,20);
       alien10.startAnimation(moveAlienToRight,20);

       alien11.startAnimation(moveAlienToRight,20);
       alien12.startAnimation(moveAlienToRight,20);
       alien13.startAnimation(moveAlienToRight,20);
       alien14.startAnimation(moveAlienToRight,20);
       alien15.startAnimation(moveAlienToRight,20);

 

    </script>

</body>
</html>